"use strict";function Test(t){function e(e){var o={};return o.to=function(o){Promise.resolve(e).then(function(e){Test.prototype.showResult(t,o,e,n)})},o.toBe=o.to,o.toHave=o.to,o.is=o.to,o.equals=o.to,o}var n,o={};return o.using=function(t){return n=t,o},o.do=function(t){return"function"==typeof t&&t(),o},o.expect=function(t){return new e(t)},o.assert=o.expect,o}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};Test.ValidationFunction={EQUALS:function(t,e){return t===e},NOT_EQUALS:function(t,e){return t!==e},CONTAINS:function(t,e){return!!~e.indexOf(t)},ARRAY_SHALLOW:function(t,e){var n=t.length;if(e.length!==n)return!1;for(;n--;)if(e[n]!==t[n])return!1;return!0},OBJECT_DEEP:function(t,e){if(null==t||null==e)return t===e;if(t.constructor!==e.constructor)return!1;if(t instanceof Function)return t===e;if(t instanceof RegExp)return t===e;if(t===e||t.valueOf()===e.valueOf())return!0;if(Array.isArray(t)&&t.length!==e.length)return!1;if(t instanceof Date)return!1;if(!(t instanceof Object))return!1;if(!(e instanceof Object))return!1;var n=Object.keys(t);return Object.keys(e).every(function(t){return~n.indexOf(t)})&&n.every(function(n){return Test.ValidationFunction.OBJECT_DEEP(t[n],e[n])})}},Test.Console={CONSOLE:Symbol("console"),TERMINAL:Symbol("terminal")},Test.prototype.output=null,Test.prototype.hidePassed=!1,Test.prototype.colorMethod=Test.Console.CONSOLE,Test.prototype.showResult=function(t,e,n,o){var r=Test.prototype.createResult(t,e,n,o||Test.ValidationFunction.EQUALS);if(null!==r)if(Test.prototype.output)Test.prototype.output.appendChild(r.result);else if(Test.prototype.colorMethod===Test.Console.CONSOLE)console.log("%c"+r.result,"\n\t\t\t\tcolor: "+r.bgColor+";\n\t\t\t\ttext-shadow: 0 0 1px rgba(0, 0, 0, .2);\n\t\t\t\t"+(r.passed?"":"font-size: 150%; font-weight: bold;")+"\n\t\t\t");else{var i={};r.passed?(i.bg="[49m",i.fg="[92m"):(i.bg="[101m",i.fg="[93m"),console.log(""+i.bg+i.fg+r.result+"[0m")}},Test.prototype.getResult=function(t,e,n){return t.call(void 0,e,n)},Test.prototype.createResult=function(t,e,n,o){var r=function(t){return"object"===("undefined"==typeof t?"undefined":_typeof(t))?JSON.stringify(t,null,4):t},i=Test.prototype.getResult(o,e,n)===!0;if(Test.prototype.hidePassed&&i)return null;var u=Test.prototype.output?{wrapperBegin:"<strong>",wrapperEnd:"</strong>",newLine:"<br>",separator:""}:{wrapperBegin:'"',wrapperEnd:'"',newLine:"\n >> ",separator:"-------------------------------------\n"},s="";o!==Test.ValidationFunction.EQUALS&&(s=" (using custom validation function)");var f,p=u.separator+"Testing: "+t+s+u.newLine;if(i?(p+="[âœ”] Passed!",f="#c8e6c9"):(p+="[âœ–] Failed. Expected "+u.wrapperBegin+r(e)+u.wrapperEnd+" ("+("undefined"==typeof e?"undefined":_typeof(e))+"), got "+u.wrapperBegin+r(n)+u.wrapperEnd+" ("+("undefined"==typeof n?"undefined":_typeof(n))+") instead.",f="#ff8a80"),Test.prototype.output){var c=document.createElement("div");Test.prototype.stylize(c,{"line-height":"1.5em",margin:"0.5em 0",padding:"0.5em",background:f}),c.insertAdjacentHTML("beforeend",p),p=c}return{result:p,passed:i,bgColor:f}},Test.prototype.stylize=function(t,e){Object.keys(e).forEach(function(n){t.style[n]=e[n]})},Test.config=function(){var t={};return t.output=function(t){t instanceof HTMLElement&&(Test.prototype.output=t)},t.hidePassed=function(t){Test.prototype.hidePassed=t,t&&console.warn("Passed tests are hidden!")},t.colorMethod=function(t){Test.prototype.colorMethod=t},t}(),"undefined"!=typeof module&&!function(){Test.config.colorMethod(Test.Console.TERMINAL);var t=require("vm"),e=function(e,n){var o=e+"/"+n;t.runInThisContext(fs.readFileSync(o,"utf8"),o)};module.exports={Test:Test,inject:e}}();